<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>حساب سعر النايلون</title>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    crossorigin="anonymous"
  />
  <style>
    @import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Sans&display=swap');

    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'IBM Plex Sans', sans-serif; direction: rtl;
      background-color: #f0fafa; color: #333;
      display: flex; justify-content: center; align-items: flex-start;
      min-height: 100vh; padding: 20px;
    }
    .container {
      background: white; border-radius: 20px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
      max-width: 420px; width: 100%; overflow: hidden;
    }
    header { background: #22cfcf; padding: 10px; text-align: center; }
    header img { height: 50px; }
    .content { padding: 30px; }
    label { display: block; margin: 10px 0 5px; font-weight: 600; }
    select, input[type=number] {
      width: 100%; padding: 12px; font-size: 16px;
      border: 1px solid #ccc; border-radius: 10px;
      margin-bottom: 15px; transition: border-color .3s, box-shadow .3s;
    }
    select:focus, input[type=number]:focus {
      outline: none; border-color: #22cfcf;
      box-shadow: 0 0 0 3px rgba(34,207,207,0.3);
    }
    button {
      width:100%; padding:12px; font-size:16px;
      background:#22cfcf; border:none; border-radius:10px;
      color:white; font-weight:bold; cursor:pointer;
      transition:background .3s;
    }
    button:hover { background:#1bbaba; }
    #result {
      margin-top:20px; padding:20px; border-radius:15px;
      background:linear-gradient(to top left, #e6f5f3, #b8e5de);
      color:#114444; font-size:18px;
      opacity:0; transform:translateY(10px);
      transition:opacity .5s, transform .5s;
      box-shadow:0 4px 12px rgba(0,0,0,0.1);
      border-right:6px solid #22cfcf;
    }
    #result.show { opacity:1; transform:translateY(0); }
    #result p { margin-bottom:8px; line-height:1.6; }
    .notes { margin-top:15px; font-size:14px; color:#666; }
    .notes p { margin-bottom:6px; }
    .order-button {
      display:block; margin:15px auto 0;
      padding:12px; width:calc(100% - 40px);
      background:#28a745; color:#fff;
      text-align:center; text-decoration:none;
      border-radius:10px; font-weight:bold;
      transition:background .3s, transform .2s;
    }
    .order-button:hover { background:#218838; transform:scale(1.02); }
    @media (max-width:480px) {
      body { padding:0; }
      .container { border-radius:0; width:100%; margin:0; box-shadow:none; }
      .content { padding:20px; }
      header img { height:45px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <img src="https://i.ibb.co/hx8P56yc/image.png" alt="شعار الموقع">
    </header>
    <div class="content">
      <label for="shape">الشكل:</label>
      <select id="shape">
        <option value="مستطيل">مستطيل</option>
        <option value="مربع">مربع</option>
        <option value="دائري">دائري</option>
      </select>
      <label for="width" id="labelWidth">العرض (سم):</label>
      <input type="number" id="width" placeholder="أدخل العرض" min="0" />
      <label for="height" id="labelHeight">الطول (سم):</label>
      <input type="number" id="height" placeholder="أدخل الطول" min="0" />
      <button id="calcBtn">احسب!</button>
      <div id="result"></div>
      <div class="notes">
        <p>• السعر لا يتضمّن رسوم التوصيل.</p>
        <p>• يُضاف هامش 3 سم إلى قياس الطول.</p>
      </div>
    </div>
  </div>
  <script>
    const shapeEl = document.getElementById('shape');
    const widthEl = document.getElementById('width');
    const heightEl = document.getElementById('height');
    const labelWidth = document.getElementById('labelWidth');
    const labelHeight = document.getElementById('labelHeight');

    function updateFields() {
      const shape = shapeEl.value;
      if (shape === 'مستطيل') {
        labelWidth.textContent = 'العرض (سم):';
        widthEl.placeholder = 'أدخل العرض';
        labelHeight.style.display = '';
        heightEl.style.display = '';
      } else if (shape === 'مربع') {
        labelWidth.textContent = 'طول الضلع (سم):';
        widthEl.placeholder = 'أدخل طول الضلع';
        labelHeight.style.display = 'none';
        heightEl.style.display = 'none';
      } else if (shape === 'دائري') {
        labelWidth.textContent = 'قطر الدائرة (سم):';
        widthEl.placeholder = 'أدخل قطر الدائرة';
        labelHeight.style.display = 'none';
        heightEl.style.display = 'none';
      }
    }

    shapeEl.addEventListener('change', updateFields);
    updateFields();

    document.getElementById('calcBtn').addEventListener('click', function() {
      let width = parseFloat(widthEl.value);
      let height = parseFloat(heightEl.value);
      if (!width || width <= 0 || (shapeEl.value === 'مستطيل' && (!height || height <= 0))) {
        alert('يرجى إدخال قيم صحيحة موجبة.');
        return;
      }
      if (shapeEl.value !== 'مستطيل') {
        height = width;
      }
      const heightWithAllowance = height + 3;
      const meters = heightWithAllowance / 100;
      const pricePerMeter = 13500;
      const totalPrice = meters * pricePerMeter;
      const weight = ((width / 100) * (heightWithAllowance / 100)).toFixed(2);
      const formattedPrice = formatPrice(totalPrice);
      const message = encodeURIComponent(`مرحبا, اريد غطاء بقياس ${width}×${height} بسعر ${formattedPrice}`);
      const waLink = `https://wa.me/9647724522333?text=${message}`;

      const resultBox = document.getElementById('result');
      resultBox.innerHTML = `
        <p><i class="fa-solid fa-ruler"></i> <strong>القياس:</strong> ${width} × ${height} سم</p>
        <p><i class="fa-solid fa-money-bill-wave"></i> <strong>السعر:</strong> ${formattedPrice}</p>
        <p><i class="fa-solid fa-weight-hanging"></i> <strong>الوزن:</strong> ${weight} كغم</p>
        <p><i class="fa-solid fa-arrows-v"></i> <strong>السُمك:</strong> 2.5 ملم</p>
        <a href="${waLink}" target="_blank" class="order-button">اطلب الآن</a>
      `;
      resultBox.classList.add('show');
    });

    function formatPrice(value) {
      const rounded = Math.round(value / 250) * 250;
      return rounded.toLocaleString('en-US') + ' د.ع';
    }
  </script>
</body>
</html>
