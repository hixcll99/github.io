<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>حاسبة السعر والتفاصيل</title>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@300;400;600;700&display=swap" rel="stylesheet" />

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" />

  <style>
    :root{
      --primary:#1fbdbd;
      --primary-700:#159b9b;
      --success:#2fbf71;
      --success-700:#259c5d;
      --bg-1:#f6fbfb;
      --text:#1f2a2e;
      --radius:18px;
      --radius-lg:22px;
      --shadow-md:0 8px 24px rgba(0,0,0,.08);
      --ring:0 0 0 3px rgba(31,189,189,.18);
    }

    *{box-sizing:border-box;}

    body{
      margin:0;
      padding:0;
      font-family:'IBM Plex Sans',sans-serif;
      background:var(--bg-1);
      color:var(--text);
      min-height:100vh;
    }

    /* تغليف عام */
    .wrap{
      width:100%;
      max-width:100%;
      padding:0 0 40px;
      margin:0 auto;
    }

    /* الهيدر القديم الجميل */
    header.site-head{
      background:linear-gradient(90deg,var(--primary),var(--primary-700));
      border-radius:var(--radius-lg);
      box-shadow:var(--shadow-md);
      height:78px;
      padding:0 18px;
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
      width:94%;
      max-width:840px;
      margin:16px auto 0;
    }

    .logo img{
      height:110px;
      object-fit:contain;
      display:block;
    }

    /* الكارد */
    .card{
      background:#fff;
      border-radius:var(--radius-lg);
      box-shadow:var(--shadow-md);
      margin:16px auto;
      width:94%;
      max-width:840px;
      overflow:hidden;
    }

    .card-head{
      padding:16px 18px;
      border-bottom:1px solid #eef3f3;
      background:#ffffff;
    }

    .card-head-main{
      font-weight:700;
      font-size:1rem;
      color:#0e3f3f;
      display:flex;
      align-items:center;
      gap:8px;
    }

    form.content{
      padding:18px;
      display:grid;
      gap:14px;
    }

    .grid{
      display:grid;
      gap:12px;
      grid-template-columns:1fr;
    }
    @media(min-width:640px){
      .grid{grid-template-columns:1fr 1fr;}
    }

    label{
      font-weight:600;
      margin-bottom:6px;
      color:#123;
      display:block;
    }

    input,select{
      width:100%;
      padding:12px 14px;
      font-size:1rem;
      border:1px solid #d9e5e6;
      border-radius:var(--radius);
      background:#fff;
    }

    input:focus,select:focus{
      outline:none;
      border-color:var(--primary);
      box-shadow:var(--ring);
    }

    .select-wrap{position:relative;}
    .select-wrap select{padding-right:40px;}
    .select-icon{
      position:absolute;
      right:12px;
      top:50%;
      transform:translateY(-50%);
      color:var(--primary);
      opacity:.9;
    }

    /* زر احسب */
    #calcBtn{
      width:100%;
      padding:12px 16px;
      background:linear-gradient(180deg,var(--primary),var(--primary-700));
      color:#fff;
      border:none;
      border-radius:var(--radius);
      font-size:1.18rem;
      font-weight:800;
      cursor:pointer;
      box-shadow:0 6px 14px rgba(21,155,155,.25);
    }

    /* النتيجة */
    #result{
      margin-top:8px;
      padding:16px;
      border-radius:var(--radius-lg);
      background:#ffffffd0;
      border:1px solid rgba(0,0,0,.06);
      box-shadow:0 12px 30px rgba(0,0,0,.08);
      display:none;
    }
    #result.show{display:block;}

    #result .row{
      display:flex;
      align-items:center;
      gap:10px;
      padding:10px 0;
      border-bottom:1px dashed rgba(0,0,0,.06);
    }
    #result .row:last-child{border-bottom:none;}

    #result .label{font-weight:700;}
    #result .value{
      margin-inline-start:auto;
      font-weight:400;
    }

    .order-button{
      margin-top:14px;
      padding:12px 16px;
      width:100%;
      display:flex;
      justify-content:center;
      align-items:center;
      text-decoration:none;
      color:#fff;
      background:linear-gradient(180deg,var(--success),var(--success-700));
      border-radius:var(--radius);
      font-size:1.18rem;
      font-weight:800;
      box-shadow:0 10px 24px rgba(37,156,93,.3);
    }

    /* الملاحظات */
    .notes{
      width:94%;
      max-width:840px;
      margin:18px auto;
      padding:18px 0 0;
      position:relative;
    }
    .notes::before{
      content:"";
      height:1px;
      width:100%;
      background:#ddd;
      position:absolute;
      top:0;
    }

    .note-row{
      display:flex;
      gap:12px;
      padding:10px 0;
      line-height:1.6;
    }
    .note-icon{
      width:32px;height:32px;
      border-radius:50%;
      background:rgba(31,189,189,.15);
      color:var(--primary);
      display:flex;
      align-items:center;
      justify-content:center;
    }

    .note-title{font-weight:800;}
    .highlight-number{font-weight:400;color:#000;}

  </style>
</head>

<body>
  <div class="wrap">

    <!-- الهيدر -->
    <header class="site-head">
      <div class="logo">
        <img src="https://cdn.imgpile.com/f/nQ5XZuf_xl.png" alt="Logo">
      </div>
    </header>

    <!-- الكارد -->
    <section class="card">

      <div class="card-head">
        <div class="card-head-main">
          <i class="fa-solid fa-circle-info"></i>
          يرجى إدخال المعلومات التالية:
        </div>
      </div>

      <form class="content" novalidate>
        <div class="grid">

          <div class="field">
            <label>الشكل</label>
            <div class="select-wrap">
              <select id="shape">
                <option value="مستطيل">مستطيل</option>
                <option value="مربع">مربع</option>
                <option value="دائري">دائري</option>
              </select>
              <i class="fa-solid fa-chevron-down select-icon"></i>
            </div>
          </div>

          <div class="field" id="heightGroup">
            <label id="labelHeight">الطول (سم)</label>
            <input type="number" id="height" placeholder="ادخل الطول بالسنتيمتر" min="1" />
          </div>

          <div class="field" id="widthGroup">
            <label>العرض (سم)</label>
            <input type="number" id="width" placeholder="ادخل العرض بالسنتيمتر" min="1" />
          </div>

        </div>

        <button type="button" id="calcBtn">احسب</button>

        <div id="result"></div>

      </form>

      <div class="notes">
        <div class="note-row">
          <div class="note-icon"><i class="fa-solid fa-truck"></i></div>
          <span>
            <span class="note-title">سعر التوصيل:</span>
            بغداد <span class="highlight-number">5,000</span> |
            المحافظات <span class="highlight-number">6,000</span>
          </span>
        </div>

        <div class="note-row">
          <div class="note-icon"><i class="fa-solid fa-maximize"></i></div>
          <span>
            <span class="note-title">زيادة بالطول:</span>
            يُضاف هامش <span class="highlight-number">3 سم</span> إلى قياس الطول.
          </span>
        </div>

      </div>

    </section>
  </div>

  <!-- الجافاسكربت -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {

      const PRICE_PER_UNIT = 14750;
      const ROUND_STEP = 250;
      const WA_NUMBER = "9647724522333";

      const shapeEl = document.getElementById("shape");
      const heightEl = document.getElementById("height");
      const widthEl = document.getElementById("width");
      const widthGrp = document.getElementById("widthGroup");
      const labelHeight = document.getElementById("labelHeight");
      const resultBox = document.getElementById("result");

      function clean(el){
        el.addEventListener("input",()=>{
          el.value = el.value.replace(/[^0-9]/g,"");
        });
      }
      clean(heightEl);
      clean(widthEl);

      function updateFields(){
        const shape = shapeEl.value;
        resultBox.style.display="none";

        if(shape === "مستطيل"){
          widthGrp.style.display = "block";
          labelHeight.textContent = "الطول (سم)";
        }
        else if(shape === "مربع"){
          widthGrp.style.display = "none";
          labelHeight.textContent = "طول الضلع (سم)";
        }
        else{
          widthGrp.style.display = "none";
          labelHeight.textContent = "قطر الدائرة (سم)";
        }
      }

      shapeEl.addEventListener("change", updateFields);

      function computeArea(shape,h,w){
        const hM = h/100;
        if(shape==="مستطيل") return hM*(w/100);
        if(shape==="مربع")   return hM*hM;
        if(shape==="دائري"){
          const r = hM/2;
          return Math.PI*r*r;
        }
        return 0;
      }

      function computePrice(shape,h,w){
        return computeArea(shape,h,w) * PRICE_PER_UNIT;
      }

      function fmt(n){
        const r = Math.round(n/ROUND_STEP)*ROUND_STEP;
        return r.toLocaleString("en-US")+" د.ع";
      }

      document.getElementById("calcBtn").addEventListener("click",()=>{
        const shape = shapeEl.value;
        const h = Number(heightEl.value);
        const w = Number(widthEl.value);

        if(!h || (shape==="مستطيل" && !w)){
          alert("يرجى إدخال قيم صحيحة");
          return;
        }

        const price = computePrice(shape,h,w);
        const area  = computeArea(shape,h,w);
        const weight = (area*0.0025*1250).toFixed(2);

        let dimsText =
          shape==="مستطيل" ? `${h} × ${w}` :
          shape==="مربع"   ? `${h} × ${h}` :
                            `${h}`;

        const msg = encodeURIComponent(`مرحبا، أريد غطاء ${shape} بقياس ${dimsText} سم بسعر ${fmt(price)}`);
        const waLink = `https://wa.me/${WA_NUMBER}?text=${msg}`;

        resultBox.innerHTML = `
          <div class="row">
            <i class="fa-solid fa-money-bill-wave"></i>
            <div class="label">السعر</div>
            <div class="value">${fmt(price)}</div>
          </div>

          <div class="row">
            <i class="fa-solid fa-ruler"></i>
            <div class="label">القياس</div>
            <div class="value">${dimsText} سم</div>
          </div>

          <div class="row">
            <i class="fa-solid fa-weight-hanging"></i>
            <div class="label">الوزن</div>
            <div class="value">${weight} كغم</div>
          </div>

          <div class="row">
            <i class="fa-solid fa-arrows-v"></i>
            <div class="label">السُمك</div>
            <div class="value">2.5 ملم</div>
          </div>

          <a class="order-button" href="${waLink}" target="_blank">
            اطلب الآن
          </a>
        `;

        resultBox.classList.add("show");
      });

      updateFields();

    });
  </script>

</body>
</html>
