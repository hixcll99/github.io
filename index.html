<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>حاسبة السعر والتفاصيل</title>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@300;400;600;700&display=swap" rel="stylesheet" />

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" />

  <style>
    :root{
      --primary:#1fbdbd;
      --primary-700:#159b9b;
      --success:#2fbf71;
      --success-700:#259c5d;
      --bg-1:#f6fbfb;
      --bg-2:#eef7f7;
      --text:#1f2a2e;
      --muted:#6a7a80;
      --radius:14px;
      --radius-lg:18px;
      --shadow-md:0 8px 24px rgba(0,0,0,.08);
      --ring:0 0 0 3px rgba(31,189,189,.18);
      --glass-bg:rgba(255,255,255,.55);
      --glass-stroke:rgba(31,189,189,.22);
      --glass-overlay:linear-gradient(to bottom right,rgba(31,189,189,.06),rgba(255,255,255,.12));
      --container-max:840px;
    }

    *{box-sizing:border-box;}
    html,body{margin:0;padding:0;}
    body{
      font-family:'IBM Plex Sans',sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 600px at 100% -10%,var(--bg-2),transparent 60%),
        radial-gradient(1200px 600px at -10% 120%,var(--bg-2),transparent 60%),
        var(--bg-1);
      min-height:100vh;
      display:flex;align-items:flex-start;justify-content:center;
    }

    .wrap{
      width:100%;max-width:var(--container-max);
      padding:20px 16px 60px;
    }

    /* header */
    header.site-head{
      background:linear-gradient(90deg,var(--primary),var(--primary-700));
      border-radius:var(--radius-lg);
      box-shadow:var(--shadow-md);
      height:78px;
      padding:0 18px;
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
    }

    .logo img{
      height:110px;
      width:auto;
      object-fit:contain;
      transform:translateY(-3px);
      display:block;
    }

    .card{
      background:#fff;
      margin-top:16px;border-radius:var(--radius-lg);
      box-shadow:var(--shadow-md);
      overflow:hidden;
    }

    .card-head{
      padding:16px 18px;
      border-bottom:1px solid #eef3f3;
      background:#ffffff;
    }

    .card-head-main{
      font-weight:700;
      font-size:1rem;
      color:#0e3f3f;
      display:flex;align-items:center;gap:8px;
    }

    form.content{padding:18px;display:grid;gap:14px;}

    .grid{display:grid;gap:12px;grid-template-columns:1fr;}
    @media(min-width:640px){.grid{grid-template-columns:1fr 1fr;}}

    label{
      font-weight:600;font-size:.95rem;
      margin-bottom:6px;display:block;color:#123;
    }

    .field{display:flex;flex-direction:column;}

    select,input[type="number"]{
      appearance:none;
      width:100%;padding:12px 14px;font-size:1rem;
      border:1px solid #d9e5e6;border-radius:var(--radius);
      background:#fff;
    }

    select:focus,input[type="number"]:focus{
      outline:none;border-color:var(--primary);box-shadow:var(--ring);
    }

    .select-wrap{position:relative;}
    .select-wrap select{padding-right:40px !important;}
    .select-wrap .select-icon{
      position:absolute;right:12px;top:50%;
      transform:translateY(-50%);
      pointer-events:none;color:var(--primary);opacity:.9;font-size:1rem;
    }

    /* زر احسب – رجع للحجم الطبيعي فقط خط أكبر */
    #calcBtn{
      width:100%;
      padding:12px 16px;
      border:none;
      border-radius:var(--radius);
      background:linear-gradient(180deg,var(--primary),var(--primary-700));
      color:#fff;
      font-weight:800;
      font-size:1.18rem; /* ← تكبير النص فقط */
      cursor:pointer;
      box-shadow:0 6px 14px rgba(21,155,155,.25);
    }

    /* result box */
    #result{
      margin-top:8px;padding:16px;
      border-radius:var(--radius-lg);
      background:var(--glass-overlay),var(--glass-bg);
      border:1px solid var(--glass-stroke);
      box-shadow:0 12px 30px rgba(0,0,0,.10);
      display:none;
    }

    #result.show{display:block;}

    #result .row{
      display:flex;align-items:center;gap:10px;
      padding:10px 0;border-bottom:1px dashed rgba(0,0,0,.06);
    }
    #result .row:last-child{border-bottom:none;}

    #result i{
      width:22px;text-align:center;color:var(--primary);
    }

    #result .label{
      font-weight:700;color:#0e3f3f;
    }

    #result .value{
      margin-inline-start:auto;
      font-weight:700;
      color:#133;
    }

    /* زر اطلب الآن – رجع للحجم الطبيعي */
    .order-button{
      display:inline-flex;align-items:center;justify-content:center;
      width:100%;
      margin-top:14px;
      padding:12px 16px;
      border-radius:calc(var(--radius) + 4px);
      text-decoration:none;
      font-weight:800;
      font-size:1.18rem;
      letter-spacing:.2px;
      color:#fff;
      background:linear-gradient(180deg,var(--success),var(--success-700));
      box-shadow:0 10px 24px rgba(37,156,93,.3);
      border:1px solid rgba(37,156,93,.35);
    }

    .notes{
      padding:18px;display:flex;flex-direction:column;gap:12px;
      color:#0e3f3f;font-size:.92rem;position:relative;margin-top:16px;
    }
    .notes::before{
      content:"";width:100%;height:1px;
      background:rgba(0,0,0,.08);position:absolute;top:-12px;left:0;
    }

    .note-row{
      display:flex;align-items:center;gap:12px;line-height:1.7;
    }

    .note-icon{
      width:32px;height:32px;border-radius:50%;
      background:rgba(31,189,189,.15);
      display:flex;align-items:center;justify-content:center;
      color:var(--primary);font-size:1rem;
      box-shadow:0 2px 6px rgba(0,0,0,.08);
    }

    .note-title{font-weight:800;}
    .highlight-number{font-weight:900;color:#000;}
  </style>
</head>

<body>
  <div class="wrap">

    <header class="site-head">
      <div class="logo">
        <img src="https://cdn.imgpile.com/f/nQ5XZuf_xl.png" alt="Logo">
      </div>
    </header>

    <section class="card">

      <div class="card-head">
        <div class="card-head-main">
          <i class="fa-solid fa-circle-info"></i>
          يرجى إدخال المعلومات التالية:
        </div>
      </div>

      <form class="content" novalidate>
        <div class="grid">

          <div class="field">
            <label>الشكل</label>
            <div class="select-wrap">
              <select id="shape">
                <option value="مستطيل">مستطيل</option>
                <option value="مربع">مربع</option>
                <option value="دائري">دائري</option>
              </select>
              <i class="fa-solid fa-chevron-down select-icon"></i>
            </div>
          </div>

          <div class="field" id="heightGroup">
            <label>الطول (سم)</label>
            <input type="number" id="height" placeholder='ادخل الطول "بالسنتيمتر"' min="1" step="1" />
          </div>

          <div class="field" id="widthGroup">
            <label>العرض (سم)</label>
            <input type="number" id="width" placeholder='ادخل العرض "بالسنتيمتر"' min="1" step="1" />
          </div>

        </div>

        <button type="button" id="calcBtn">احسب</button>

        <div id="result"></div>

      </form>

      <!-- notes -->
      <div class="notes">

        <div class="note-row">
          <div class="note-icon"><i class="fa-solid fa-truck"></i></div>
          <span>
            <span class="note-title">سعر التوصيل:</span>
            بغداد <span class="highlight-number">5,000</span> |
            المحافظات <span class="highlight-number">6,000</span>
          </span>
        </div>

        <div class="note-row">
          <div class="note-icon"><i class="fa-solid fa-maximize"></i></div>
          <span>
            <span class="note-title">زيادة بالطول:</span>
            يُضاف هامش <span class="highlight-number">3 سم</span> إلى قياس الطول.
          </span>
        </div>

      </div>

    </section>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {

      const PRICE_PER_UNIT = 14750;
      const ROUND_STEP = 250;
      const WA_NUMBER = "9647724522333";

      const shapeEl  = document.getElementById("shape");
      const heightEl = document.getElementById("height");
      const widthEl  = document.getElementById("width");
      const widthGrp = document.getElementById("widthGroup");
      const resultBox = document.getElementById("result");

      // دعم الأرقام العربية + منع السالب
      const arabicMap = {'٠':'0','١':'1','٢':'2','٣':'3','٤':'4','٥':'5','٦':'6','٧':'7','٨':'8','٩':'9'};
      function clean(el){
        el.addEventListener("input",()=>{
          let v = el.value;
          v = v.replace(/[٠-٩]/g, d => arabicMap[d]);
          v = v.replace(/[^0-9]/g,"");
          if(v !== "" && Number(v) < 1) v = "1";
          el.value = v;
        });
      }
      clean(heightEl);
      clean(widthEl);

      function updateFields(){
        const shape = shapeEl.value;
        resultBox.classList.remove("show");
        resultBox.innerHTML="";

        if(shape === "مستطيل"){
          widthGrp.style.display="";
        }else{
          widthGrp.style.display="none";
          widthEl.value="";
        }
      }
      shapeEl.addEventListener("change",updateFields);

      function computeArea(shape,h,w){
        const hM=h/100;
        if(shape==="مستطيل") return hM*(w/100);
        if(shape==="مربع")   return hM*hM;
        if(shape==="دائري"){
          const r=hM/2;
          return Math.PI*r*r;
        }
        return 0;
      }

      function computePrice(shape,h,w){
        const hM=h/100;
        if(shape==="مستطيل" && w<=100) return hM*PRICE_PER_UNIT;
        if(shape==="دائري"){
          if(h<=100) return hM*PRICE_PER_UNIT;
          return (h/100)*(h/100)*PRICE_PER_UNIT;
        }
        return computeArea(shape,h,w)*PRICE_PER_UNIT;
      }

      function fmt(n){
        const r = Math.round(n/ROUND_STEP)*ROUND_STEP;
        return r.toLocaleString("en-US")+" د.ع";
      }

      document.getElementById("calcBtn").addEventListener("click",()=>{

        const shape=shapeEl.value;
        const h=Number(heightEl.value);
        const w=Number(widthEl.value);

        if(!h || h<=0 || (shape==="مستطيل" && (!w || w<=0))){
          alert("يرجى إدخال قيم صحيحة.");
          return;
        }

        const price = computePrice(shape,h,w);
        const priceText = fmt(price);
        const area = computeArea(shape,h,w);
        const weight = (area*0.0025*1250).toFixed(2) ;
        const dims = (shape==="مستطيل") ? `${h} × ${w}` : `${h}`;

        const waMsg = encodeURIComponent(`مرحبا، أريد غطاء بقياس ${dims} بسعر ${priceText}`);
        const waLink = `https://wa.me/${WA_NUMBER}?text=${waMsg}`;

        resultBox.innerHTML = `
          <div class="row">
            <i class="fa-solid fa-money-bill-wave"></i>
            <div class="label">السعر</div>
            <div class="value">${priceText}</div>
          </div>

          <div class="row">
            <i class="fa-solid fa-ruler"></i>
            <div class="label">القياس</div>
            <div class="value">${dims} سم</div>
          </div>

          <div class="row">
            <i class="fa-solid fa-weight-hanging"></i>
            <div class="label">الوزن</div>
            <div class="value">${weight} كغم</div>
          </div>

          <div class="row">
            <i class="fa-solid fa-arrows-v"></i>
            <div class="label">السُمك</div>
            <div class="value">2.5 ملم</div>
          </div>

          <a class="order-button" href="${waLink}" target="_blank">
            اطلب الآن
          </a>
        `;

        resultBox.classList.add("show");
      });

      updateFields();

    });
  </script>

</body>
</html>
